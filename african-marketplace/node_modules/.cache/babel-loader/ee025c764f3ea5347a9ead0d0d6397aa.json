{"ast":null,"code":"var _jsxFileName = \"X:\\\\Lambda-Projects\\\\front-end\\\\african-marketplace\\\\src\\\\components\\\\Login.js\";\nimport React, { useState } from \"react\";\nimport * as yup from 'yup';\nimport axios from 'axios';\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\nconst formSchema = yup.object().shape({\n  username: yup.string().required(\"Please enter a valid username\"),\n  password: yup.string().required(\"Please enter a valid password\")\n});\n\nconst Login = () => {\n  const [formState, setFormState] = useState({\n    username: '',\n    password: ''\n  });\n  const [errorState, setErrorState] = useState({\n    username: \"\",\n    password: \"\"\n  });\n\n  const formSubmit = e => {\n    e.preventDefault();\n    axios.post('https://afrikan-market.herokuapp.com/api/auth/login', formState).then(res => {\n      localStorage.setItem('token', res.data.token);\n    }).catch(err => {\n      console.log('something went wrong', err);\n    });\n\n    const inputChange = event => {\n      event.persist();\n      validate(event);\n      let value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\n      setFormState({ ...formState,\n        [event.target.name]: value\n      });\n    };\n\n    const validate = event => {\n      let value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\n      yup.reach(formSchema, event.target.name).validate(value).then(valid => {\n        setErrorState({ ...errorState,\n          [event.target.name]: \"\"\n        });\n      }).catch(err => {\n        setErrorState({ ...errorState,\n          [event.target.name]: err.errors[0]\n        });\n      });\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    placeholder: \"Username\",\n    value: formState.username,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"password\",\n    value: formState.password,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default Login;","map":{"version":3,"sources":["X:/Lambda-Projects/front-end/african-marketplace/src/components/Login.js"],"names":["React","useState","yup","axios","axiosWithAuth","formSchema","object","shape","username","string","required","password","Login","formState","setFormState","errorState","setErrorState","formSubmit","e","preventDefault","post","then","res","localStorage","setItem","data","token","catch","err","console","log","inputChange","event","persist","validate","value","target","type","checked","name","reach","valid","errors"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport * as yup from 'yup';\r\n\r\nimport axios from 'axios';\r\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\r\n\r\nconst formSchema = yup.object().shape({\r\n    username: yup.string().required(\"Please enter a valid username\"),\r\n    password: yup.string().required(\"Please enter a valid password\")\r\n})\r\n\r\nconst Login = () => {\r\n    const [formState, setFormState] = useState({\r\n        username: '',\r\n        password: ''\r\n    })\r\n\r\n    const [errorState, setErrorState] = useState ({\r\n        username: \"\",\r\n        password: \"\"\r\n    })\r\n\r\n    const formSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        axios\r\n            .post('https://afrikan-market.herokuapp.com/api/auth/login', formState)\r\n            .then(res => {\r\n                localStorage.setItem('token', res.data.token)\r\n            })\r\n            .catch(err => {\r\n                console.log('something went wrong', err)\r\n            })\r\n\r\n            const inputChange = event => {\r\n                event.persist()\r\n                validate(event)\r\n                let value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\r\n                setFormState({...formState, [event.target.name]: value})\r\n            }\r\n\r\n            const validate = event => {\r\n                let value = \r\n                event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\r\n                yup\r\n                .reach(formSchema, event.target.name)\r\n                .validate(value)\r\n                .then(valid => {\r\n                    setErrorState({\r\n                        ...errorState,\r\n                        [event.target.name]: \"\"\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    setErrorState({\r\n                        ...errorState,\r\n                            [event.target.name]: err.errors[0]\r\n                    })\r\n                })\r\n            }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form>\r\n                <input \r\n                    type='text'\r\n                    name='username'\r\n                    placeholder='Username'\r\n                    value={formState.username}\r\n                    onChange={inputChange}\r\n                />\r\n                <input \r\n                    type='password'\r\n                    name='password'\r\n                    placeholder='password'\r\n                    value={formState.password}\r\n                    onChange={inputChange}\r\n                />\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}