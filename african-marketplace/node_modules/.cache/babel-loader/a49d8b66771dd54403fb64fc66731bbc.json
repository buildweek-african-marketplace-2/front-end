{"ast":null,"code":"var _jsxFileName = \"X:\\\\Lambda-Projects\\\\front-end\\\\african-marketplace\\\\src\\\\components\\\\SignUp.js\";\nimport React, { useState } from 'react';\nimport * as yup from \"yup\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\n\nfunction SignUp(props) {\n  const formSchema = yup.object().shape({\n    username: yup.string().min(2, 'Must be more than 2 character').required(\"Username is a required field\"),\n    password: yup.string().required('Password is required') // passwordConfirmation: yup.string(),\n    // .oneOf([yup.ref('password'), null], 'Passwords must match'),\n\n  }); //set state for form\n\n  const [formState, setFormState] = useState({\n    username: '',\n    password: ''\n  }); // set state for errors\n\n  const [errors, setErrors] = useState({\n    username: '',\n    password: ''\n  });\n  const [post, setPost] = useState([]);\n\n  const formSubmit = e => {\n    e.preventDefault();\n    axiosWithAuth().post(\"https://sauti-africa.herokuapp.com/api/register\", formState).then(res => {\n      setPost(res.data); // get just the form data from the REST api\n\n      console.log(\"success\", res);\n      props.history.push('/'); // reset form if successful\n\n      setFormState({\n        username: '',\n        password: ''\n      });\n    }).catch(err => console.log(err.response));\n  };\n\n  const validateChange = e => {\n    yup.reach(formSchema, e.target.name).validate(e.target.value).then(valid => {\n      setErrors({ ...errors,\n        [e.target.name]: \"\"\n      });\n    }).catch(err => {\n      setErrors({ ...errors,\n        [e.target.name]: err.errors[0]\n      });\n    });\n  };\n\n  const inputChange = e => {\n    e.persist();\n    const newFormData = { ...formState,\n      [e.target.name]: e.target.type === \"checkbox\" ? e.target.checked : e.target.value\n    };\n    validateChange(e);\n    setFormState(newFormData);\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    className: \"centeredToPageForms\",\n    onSubmit: formSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"username\",\n    type: \"text\",\n    placeholder: \"Username\",\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }), errors.username.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 49\n    }\n  }, errors.username) : null, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }), errors.password.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 50\n    }\n  }, errors.password) : null, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"Submit\"));\n}\n\nexport default SignUp;","map":{"version":3,"sources":["X:/Lambda-Projects/front-end/african-marketplace/src/components/SignUp.js"],"names":["React","useState","yup","axiosWithAuth","SignUp","props","formSchema","object","shape","username","string","min","required","password","formState","setFormState","errors","setErrors","post","setPost","formSubmit","e","preventDefault","then","res","data","console","log","history","push","catch","err","response","validateChange","reach","target","name","validate","value","valid","inputChange","persist","newFormData","type","checked","length"],"mappings":"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","sourcesContent":["import React, { useState} from 'react';\r\nimport * as yup from \"yup\";\r\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\r\n\r\nfunction SignUp(props) {\r\n\r\n    const formSchema = yup.object().shape({\r\n        username: yup.string().min( 2, 'Must be more than 2 character').required(\"Username is a required field\"),\r\n        password: yup.string().required('Password is required'),\r\n        // passwordConfirmation: yup.string(),\r\n        // .oneOf([yup.ref('password'), null], 'Passwords must match'),\r\n    })\r\n\r\n    //set state for form\r\n    const [formState, setFormState] = useState({ \r\n        username: '',\r\n        password: '',\r\n    });\r\n    // set state for errors\r\n    const [errors, setErrors] = useState({ \r\n        username: '',\r\n        password: '',\r\n    });\r\n\r\n    const [post, setPost] = useState([]);\r\n\r\n    const formSubmit = e => {\r\n        e.preventDefault();\r\n        axiosWithAuth()\r\n          .post(\"https://sauti-africa.herokuapp.com/api/register\", formState)\r\n          .then(res => {\r\n           \r\n            setPost(res.data); // get just the form data from the REST api\r\n            console.log(\"success\", res);\r\n            props.history.push('/')\r\n            \r\n            // reset form if successful\r\n            setFormState({\r\n                 \r\n                username: '',\r\n                password: '',\r\n                \r\n            });\r\n\r\n          })\r\n          .catch(err => console.log(err.response));\r\n      };\r\n    \r\n      const validateChange = e => {\r\n        yup\r\n          .reach(formSchema, e.target.name)\r\n          .validate(e.target.value)\r\n          .then(valid => {\r\n            setErrors({\r\n              ...errors,\r\n              [e.target.name]: \"\"\r\n            });\r\n          })\r\n          .catch(err => {\r\n            setErrors({\r\n              ...errors,\r\n              [e.target.name]: err.errors[0]\r\n            });\r\n          });\r\n      };\r\n    \r\n      const inputChange = e => {\r\n        e.persist();\r\n\r\n        const newFormData = {\r\n          ...formState,\r\n          [e.target.name]: e.target.type === \"checkbox\" ? e.target.checked : e.target.value\r\n        };\r\n    \r\n        validateChange(e);\r\n        setFormState(newFormData);\r\n      };\r\n\r\n\r\n    return (\r\n        <form className=\"centeredToPageForms\" onSubmit={formSubmit}>\r\n            <h1>Sign Up</h1>\r\n                <input \r\n                    name='username'\r\n                    type='text'\r\n                    placeholder='Username'\r\n                    onChange={inputChange}\r\n                />{errors.username.length > 0 ? <p className='error'>{errors.username}</p> : null}\r\n                \r\n                {/* Password */}\r\n                <input \r\n                    name='password'\r\n                    type='password'\r\n                    placeholder='Password'\r\n                    onChange={inputChange}\r\n                />{errors.password.length > 0 ? (<p className='error'>{errors.password}</p>) : null}\r\n              <button>Submit</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}