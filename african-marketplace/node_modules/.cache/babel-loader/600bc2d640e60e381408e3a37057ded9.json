{"ast":null,"code":"var _jsxFileName = \"X:\\\\Lambda-Projects\\\\front-end\\\\african-marketplace\\\\src\\\\components\\\\Login.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport * as yup from 'yup';\nconst formSchema = yup.object().shape({\n  username: yup.string().required(\"Please enter a valid username\"),\n  password: yup.string().required(\"Please enter a valid password\")\n});\n\nconst Login = props => {\n  const [formState, setFormState] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [errorState, setErrorState] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [buttonDisabled, setButtonDisabled] = useState(true);\n  useEffect(() => {\n    formSchema.isValid(formState).then(valid => {\n      setButtonDisabled(!valid);\n    });\n  }, [formState]);\n\n  const formSubmit = event => {\n    event.preventDefault();\n    axios.post(\"https://afrikan-market.herokuapp.com/api/auth/login\", formState).then(response => {\n      console.log(response);\n      localStorage.setItem('token', response.data.token);\n    }).catch(err => console.log(\"something went wrong\", err));\n  };\n\n  const inputChange = event => {\n    event.persist();\n    validate(event);\n    let value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\n    setFormState({ ...formState,\n      [event.target.name]: value\n    });\n  };\n\n  const validate = event => {\n    let value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\n    yup.reach(formSchema, event.target.name).validate(value).then(valid => {\n      setErrorState({ ...errorState,\n        [event.target.name]: \"\"\n      });\n    }).catch(err => {\n      setErrorState({ ...errorState,\n        [event.target.name]: err.errors[0]\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    id: \"username\",\n    placeholder: \"Type your username\",\n    value: formState.username,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  })), errorState.username.length > 2 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, errorState.username) : null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    id: \"password\",\n    placeholder: \"Type your password\",\n    value: formState.password,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  })), errorState.password.length > 2 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, errorState.password) : null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"primary\",\n    className: \"submit\",\n    disabled: buttonDisabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, \"Login\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["X:/Lambda-Projects/front-end/african-marketplace/src/components/Login.js"],"names":["React","useState","useEffect","axios","yup","formSchema","object","shape","username","string","required","password","Login","props","formState","setFormState","errorState","setErrorState","buttonDisabled","setButtonDisabled","isValid","then","valid","formSubmit","event","preventDefault","post","response","console","log","localStorage","setItem","data","token","catch","err","inputChange","persist","validate","value","target","type","checked","name","reach","errors","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport * as yup from 'yup';\r\n\r\n\r\nconst formSchema = yup.object().shape({\r\n    username: yup.string().required(\"Please enter a valid username\"),\r\n    password: yup.string().required(\"Please enter a valid password\")\r\n})\r\n\r\nconst Login = (props) => {\r\n    const [formState, setFormState] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    })\r\n\r\n    const [errorState, setErrorState] = useState ({\r\n        username: \"\",\r\n        password: \"\"\r\n    })\r\n\r\n    const [buttonDisabled, setButtonDisabled] = useState(true);\r\n    useEffect(() => {\r\n        formSchema.isValid(formState).then(valid => {\r\n            setButtonDisabled(!valid)\r\n        });\r\n\r\n    }, [formState]);\r\n\r\n    const formSubmit = event => {\r\n        event.preventDefault();\r\n        axios\r\n            .post(\"https://afrikan-market.herokuapp.com/api/auth/login\", formState)\r\n            .then(response => {\r\n                console.log(response)\r\n                localStorage.setItem('token', response.data.token)\r\n            })         \r\n            .catch(err => console.log(\"something went wrong\", err))\r\n    }\r\n\r\n    const inputChange = event => {\r\n        event.persist()\r\n        validate(event)\r\n        let value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\r\n        setFormState({...formState, [event.target.name]: value})\r\n    }\r\n\r\n    const validate = event => {\r\n        let value = \r\n            event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\r\n            yup\r\n            .reach(formSchema, event.target.name)\r\n            .validate(value)\r\n            .then(valid => {\r\n                setErrorState({\r\n                    ...errorState,\r\n                    [event.target.name]: \"\"\r\n                });\r\n            })\r\n            .catch(err => {\r\n                setErrorState({\r\n                    ...errorState,\r\n                        [event.target.name]: err.errors[0]\r\n                })\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <div>\r\n                <div>\r\n                    <h2>Login</h2>\r\n                    <form onSubmit={formSubmit}>\r\n\r\n                        <label htmlFor=\"username\">\r\n                            <p>Username</p>\r\n                            <input type=\"text\" name=\"username\" id=\"username\" placeholder=\"Type your username\" value={formState.username} onChange={inputChange} />\r\n                        </label>\r\n                        {errorState.username.length > 2 ? (\r\n                        <p className=\"error\">{errorState.username}</p>\r\n                    ) : null}\r\n                        <br/>\r\n\r\n                        <label htmlFor=\"password\">\r\n                            <p>Password</p>\r\n                            <input type=\"password\" name=\"password\" id=\"password\" placeholder=\"Type your password\" value={formState.password} onChange={inputChange} />\r\n                        </label>\r\n                        {errorState.password.length > 2 ? (\r\n                        <p className=\"error\">{errorState.password}</p>\r\n                    ) : null}\r\n                        <br/>\r\n\r\n                        <button type=\"primary\" className=\"submit\" disabled={buttonDisabled}>Login</button>\r\n\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}